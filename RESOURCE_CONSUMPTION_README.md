### –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–º–µ—Ä—Ç–∏
- ‚úÖ **–ê–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ –≤—Å–µ–≥–¥–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è** –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
- ‚úÖ **–°–æ–±–ª—é–¥–µ–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª** –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å** —Å–º–µ—Ä—Ç–∏ –∂–∏—Ç–µ–ª–µ–π
- ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –≤—ã–∑–æ–≤–æ–≤** –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ fallback –∞–Ω–∏–º–∞—Ü–∏–∏** –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ **–ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** GameScene –∏ SimpleBunkerView

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π —Å–º–µ—Ä—Ç–∏ (–í–µ—Ä—Å–∏—è 2.4)

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π —Å–º–µ—Ä—Ç–∏
–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–º–µ—Ä—Ç–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –Ω–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–ê–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ –Ω–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–ª–∞—Å—å** –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏ –æ—Ç –≥–æ–ª–æ–¥–∞/–∂–∞–∂–¥—ã
2. **–°–ø—Ä–∞–π—Ç—ã/–æ–±—ä–µ–∫—Ç—ã –∂–∏—Ç–µ–ª–µ–π –Ω–µ —É–¥–∞–ª—è–ª–∏—Å—å** –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–º–µ—Ä—Ç–∏

### –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º
```typescript
// –í setDeadAnimation –≤—ã–∑—ã–≤–∞–ª—Å—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥
this.removeDeadResident(agent) // ‚ùå –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥, –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

// –í–º–µ—Å—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞:
this.removeResidentAgent(agent.id) // ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥
```

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

#### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤ –≤ setDeadAnimation**
```typescript
// –ß–µ—Ä–µ–∑ 1000ms —É–Ω–∏—á—Ç–æ–∂–∞–µ–º –∞–≥–µ–Ω—Ç–∞
setTimeout(() => {
  if (agent.animLock === 'dead') {
    if (agent.isEnemy) {
      this.removeDeadEnemy(agent)
    } else {
      // –î–ª—è –∂–∏—Ç–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ removeResidentAgent
      this.removeResidentAgent(agent.id)
    }
  }
}, 1000)
```

#### 2. **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**
```typescript
// –í setDeadAnimation –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
console.log(`[setDeadAnimation] –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –Ω–∞ 1000ms –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞ ${agent.id}`)
setTimeout(() => {
  console.log(`[setDeadAnimation] –¢–∞–π–º–µ—Ä –∏—Å—Ç–µ–∫ –¥–ª—è –∞–≥–µ–Ω—Ç–∞ ${agent.id}, animLock=${agent.animLock}`)
  // ... –ª–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è
}, 1000)
```

#### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º**
```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∞–≥–µ–Ω—Ç –≤—Å–µ –µ—â–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –º–∞—Å—Å–∏–≤–µ
const agentStillExists = this.residentAgents.some(a => a && a.id === agent.id)
if (!agentStillExists) {
  console.log(`[setDeadAnimation] –ê–≥–µ–Ω—Ç ${agent.id} —É–∂–µ —É–¥–∞–ª–µ–Ω –∏–∑ –º–∞—Å—Å–∏–≤–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —É–¥–∞–ª–µ–Ω–∏–µ`)
  return
}
```

#### 4. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ removeResidentAgent**
```typescript
public removeResidentAgent(id: number): void {
  console.log(`[SimpleBunkerView] removeResidentAgent –≤—ã–∑–≤–∞–Ω –¥–ª—è ID: ${id}`)
  
  // ... –ª–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è ...
  
  console.log(`[SimpleBunkerView] –£–Ω–∏—á—Ç–æ–∂–∞–µ–º —Å–ø—Ä–∞–π—Ç –∞–≥–µ–Ω—Ç–∞ ${id}`)
  agent.sprite.destroy()
  
  console.log(`[SimpleBunkerView] –ê–≥–µ–Ω—Ç –∂–∏—Ç–µ–ª—è ${id} —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω. –û—Å—Ç–∞–ª–æ—Å—å –∞–≥–µ–Ω—Ç–æ–≤: ${this.residentAgents.length}`)
}
```

### –ù–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

#### **–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–º–µ—Ä—Ç–∏ –∂–∏—Ç–µ–ª—è —Å –æ—Ç–ª–∞–¥–∫–æ–π**:
1. **–ñ–∏—Ç–µ–ª—å —É–º–∏—Ä–∞–µ—Ç** –æ—Ç –≥–æ–ª–æ–¥–∞/–∂–∞–∂–¥—ã –≤ `GameScene`
2. **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è** `removeDeadResident(id, '–≥–æ–ª–æ–¥' | '–∂–∞–∂–¥–∞')`
3. **–£–¥–∞–ª—è–µ—Ç—Å—è** –∏–∑ –º–∞—Å—Å–∏–≤–∞ `bunkerResidents`
4. **–ù–∞—Ö–æ–¥–∏—Ç—Å—è –∞–≥–µ–Ω—Ç** –≤ `SimpleBunkerView`
5. **–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è** `setDeadAnimation(agent)`
6. **–õ–æ–≥–∏—Ä—É–µ—Ç—Å—è** —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–µ—Ä–∞ –Ω–∞ 1000ms
7. **–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è** –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏
8. **–ß–µ—Ä–µ–∑ 1000ms** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
9. **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è** `removeResidentAgent(agent.id)`
10. **–£–Ω–∏—á—Ç–æ–∂–∞—é—Ç—Å—è** –≤—Å–µ —Å–ø—Ä–∞–π—Ç—ã –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã
11. **–ê–≥–µ–Ω—Ç —É–¥–∞–ª—è–µ—Ç—Å—è** –∏–∑ `residentAgents`

#### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã**:
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–º–µ—Ä—Ç–∏
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - –∞–≥–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
- ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã –≤—ã–∑–æ–≤—ã –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

### –ù–æ–≤—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã

#### `testQuickDeathAnimation()`
```typescript
// –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –±—ã—Å—Ç—Ä—É—é –∞–Ω–∏–º–∞—Ü–∏—é —Å–º–µ—Ä—Ç–∏
gameScene.testQuickDeathAnimation()
```

- –ù–∞—Ö–æ–¥–∏—Ç –∂–∏—Ç–µ–ª—è –≤ `GameScene`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∞–≥–µ–Ω—Ç–∞ –≤ `SimpleBunkerView`
- –°–∏–º—É–ª–∏—Ä—É–µ—Ç —Å–º–µ—Ä—Ç—å –æ—Ç –≥–æ–ª–æ–¥–∞
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∞–Ω–∏–º–∞—Ü–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∏ –∞–≥–µ–Ω—Ç —É–¥–∞–ª—è–µ—Ç—Å—è

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

**–°—Ü–µ–Ω–∞—Ä–∏–π**: –ñ–∏—Ç–µ–ª—å —É–º–∏—Ä–∞–µ—Ç –æ—Ç –≥–æ–ª–æ–¥–∞

1. **–í GameScene**:
   - –ñ–∏—Ç–µ–ª—å —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ `bunkerResidents`
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `removeDeadResident(id, '–≥–æ–ª–æ–¥')`

2. **–í SimpleBunkerView**:
   - –ù–∞—Ö–æ–¥–∏—Ç—Å—è –∞–≥–µ–Ω—Ç –∂–∏—Ç–µ–ª—è
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `setDeadAnimation(agent)`
   - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–µ—Ä–∞ –Ω–∞ 1000ms
   - –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏

3. **–ß–µ—Ä–µ–∑ 1000ms**:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `removeResidentAgent(agent.id)`
   - –£–Ω–∏—á—Ç–æ–∂–∞—é—Ç—Å—è –≤—Å–µ —Å–ø—Ä–∞–π—Ç—ã –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã
   - –ê–≥–µ–Ω—Ç —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ `residentAgents`

4. **–†–µ–∑—É–ª—å—Ç–∞—Ç**:
   - –ñ–∏—Ç–µ–ª—å –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç –∞–Ω–∏–º–∞—Ü–∏—é —Å–º–µ—Ä—Ç–∏
   - –ó–∞—Ç–µ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ –±—É–Ω–∫–µ—Ä–∞
   - –í—Å–µ —Å–ø—Ä–∞–π—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–Ω–∏—á—Ç–æ–∂–∞—é—Ç—Å—è
   - –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫

### –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
- ‚úÖ **–ê–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è** –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏ –æ—Ç –≥–æ–ª–æ–¥–∞/–∂–∞–∂–¥—ã
- ‚úÖ **–°–ø—Ä–∞–π—Ç—ã/–æ–±—ä–µ–∫—Ç—ã –∂–∏—Ç–µ–ª–µ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è—é—Ç—Å—è** –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤** –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞** —Å–∏—Å—Ç–µ–º—ã —Å–º–µ—Ä—Ç–∏
- ‚úÖ **–ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
