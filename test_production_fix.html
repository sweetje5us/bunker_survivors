<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: #ffffff;
        }
        .test-section {
            background-color: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #444;
        }
        .status-display {
            background-color: #333;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border: 1px solid #555;
        }
        .status-item {
            margin: 10px 0;
            padding: 8px;
            background-color: #444;
            border-radius: 3px;
            border-left: 3px solid #2196F3;
        }
        .status-working {
            border-left-color: #4CAF50;
        }
        .status-idle {
            border-left-color: #FF9800;
        }
        .status-sleeping {
            border-left-color: #9C27B0;
        }
        .production-info {
            background-color: #333;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border: 1px solid #555;
        }
        .production-item {
            margin: 10px 0;
            padding: 8px;
            background-color: #444;
            border-radius: 3px;
            border-left: 3px solid #4CAF50;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover {
            background-color: #45a049;
        }
        .log {
            background-color: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .status.success {
            background-color: #4CAF50;
            color: white;
        }
        .status.warning {
            background-color: #ff9800;
            color: white;
        }
        .status.error {
            background-color: #f44336;
            color: white;
        }
        .resource-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        .resource-card {
            background-color: #333;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #555;
        }
        .resource-title {
            font-size: 18px;
            font-weight: bold;
            color: #4CAF50;
            margin-bottom: 10px;
        }
        .resource-value {
            font-size: 14px;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>üîß –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ä–µ—Å—É—Ä—Å–æ–≤</h1>
    
    <div class="test-section">
        <h2>üìä –ü—Ä–æ–±–ª–µ–º–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ</h2>
        <div class="status-display">
            <h3>‚ùå –ü—Ä–æ–±–ª–µ–º–∞:</h3>
            <p>–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–ª–∞ —Å—Ç–∞—Ç—É—Å –∂–∏—Ç–µ–ª—è –∫–∞–∫ <code>resident.status === '—Ä–∞–±–æ—Ç–∞–µ—Ç'</code>, –Ω–æ –≤ bunkerView —Å—Ç–∞—Ç—É—Å —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ <code>—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ [–∫–æ–º–Ω–∞—Ç–µ]</code></p>
            
            <h3>‚úÖ –†–µ—à–µ–Ω–∏–µ:</h3>
            <p>–ò–∑–º–µ–Ω–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ <code>resident.status.startsWith('—Ä–∞–±–æ—Ç–∞–µ—Ç')</code> –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ —Ç–∏–ø–∞:</p>
            <ul>
                <li><code>—Ä–∞–±–æ—Ç–∞–µ—Ç</code></li>
                <li><code>—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –°—Ç–æ–ª–æ–≤–∞—è</code></li>
                <li><code>—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¢—É–∞–ª–µ—Ç</code></li>
                <li><code>—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</code></li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π</h2>
        <div class="simulation-controls">
            <button onclick="testStatusCheck()">–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞</button>
            <button onclick="testProductionCalculation()">–¢–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞</button>
            <button onclick="clearLog()">üßπ –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
        </div>
        
        <div class="status success" id="status">
            ‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
        </div>
    </div>

    <div class="test-section">
        <h2>üìù –õ–æ–≥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <div class="log" id="log"></div>
    </div>

    <script>
        // –ò–º–∏—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä—ã —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
        let residents = [
            { id: 1, name: '–ò–≤–∞–Ω', profession: '–ø–æ–≤–∞—Ä', status: '—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –°—Ç–æ–ª–æ–≤–∞—è' },
            { id: 2, name: '–ü–µ—Ç—Ä', profession: '—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫', status: '—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¢—É–∞–ª–µ—Ç' },
            { id: 3, name: '–ê–Ω–Ω–∞', profession: '–ø–æ–≤–∞—Ä', status: '–æ—Ç–¥—ã—Ö–∞–µ—Ç' },
            { id: 4, name: '–ú–∞—Ä–∏—è', profession: '—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫', status: '—Å–ø–∏—Ç' },
            { id: 5, name: '–°–µ—Ä–≥–µ–π', profession: '–ø–æ–≤–∞—Ä', status: '—Ä–∞–±–æ—Ç–∞–µ—Ç' },
            { id: 6, name: '–û–ª—å–≥–∞', profession: '—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫', status: '—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¢—É–∞–ª–µ—Ç' }
        ];

        // –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        function log(message) {
            const logElement = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollTop + 1000;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
        function updateStatus(message, type = 'success') {
            const statusElement = document.getElementById('status');
            statusElement.textContent = message;
            statusElement.className = `status ${type}`;
        }

        // –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
        function testStatusCheck() {
            log('üß™ –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –∂–∏—Ç–µ–ª–µ–π...');
            
            let workingCount = 0;
            let foodProducers = 0;
            let waterProducers = 0;
            
            residents.forEach(resident => {
                // –°—Ç–∞—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è)
                const oldCheck = resident.status === '—Ä–∞–±–æ—Ç–∞–µ—Ç';
                
                // –ù–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è)
                const newCheck = resident.status && resident.status.startsWith('—Ä–∞–±–æ—Ç–∞–µ—Ç');
                
                log(`üë§ ${resident.name} (${resident.profession}):`);
                log(`   –°—Ç–∞—Ç—É—Å: "${resident.status}"`);
                log(`   –°—Ç–∞—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: ${oldCheck} ‚ùå`);
                log(`   –ù–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: ${newCheck} ${newCheck ? '‚úÖ' : '‚ùå'}`);
                
                if (newCheck) {
                    workingCount++;
                    if (resident.profession === '–ø–æ–≤–∞—Ä') {
                        foodProducers++;
                        log(`   üç≥ –ü–æ–≤–∞—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç - –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –µ–¥—É`);
                    } else if (resident.profession === '—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫') {
                        waterProducers++;
                        log(`   üîß –°–∞–Ω—Ç–µ—Ö–Ω–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç - –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –≤–æ–¥—É`);
                    }
                }
                log('   ---');
            });
            
            log(`üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:`);
            log(`   –í—Å–µ–≥–æ –∂–∏—Ç–µ–ª–µ–π: ${residents.length}`);
            log(`   –†–∞–±–æ—Ç–∞—é—â–∏—Ö: ${workingCount}`);
            log(`   –ü—Ä–æ–∏–∑–≤–æ–¥—è—â–∏—Ö –µ–¥—É: ${foodProducers}`);
            log(`   –ü—Ä–æ–∏–∑–≤–æ–¥—è—â–∏—Ö –≤–æ–¥—É: ${waterProducers}`);
            
            if (workingCount > 0) {
                updateStatus(`‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω! –ù–∞–π–¥–µ–Ω–æ ${workingCount} —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –∂–∏—Ç–µ–ª–µ–π`, 'success');
            } else {
                updateStatus(`‚ùå –¢–µ—Å—Ç –Ω–µ –ø—Ä–æ–π–¥–µ–Ω! –ù–µ—Ç —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –∂–∏—Ç–µ–ª–µ–π`, 'error');
            }
        }

        // –¢–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
        function testProductionCalculation() {
            log('üß™ –¢–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ä–µ—Å—É—Ä—Å–æ–≤...');
            
            let foodProduction = 0;
            let waterProduction = 0;
            let workingResidents = 0;
            
            // –ò–º–∏—Ç–∏—Ä—É–µ–º —Ä–∞—Å—á–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
            residents.forEach(resident => {
                if (resident.status && resident.status.startsWith('—Ä–∞–±–æ—Ç–∞–µ—Ç')) {
                    if (resident.profession === '–ø–æ–≤–∞—Ä') {
                        const production = 5; // 5 –µ–¥. –µ–¥—ã –≤ —á–∞—Å
                        foodProduction += production;
                        workingResidents++;
                        log(`üç≥ ${resident.name} (–ø–æ–≤–∞—Ä) –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç ${production} –µ–¥. –µ–¥—ã/—á–∞—Å`);
                    } else if (resident.profession === '—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫') {
                        const production = 4; // 4 –µ–¥. –≤–æ–¥—ã –≤ —á–∞—Å
                        waterProduction += production;
                        workingResidents++;
                        log(`üîß ${resident.name} (—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫) –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç ${production} –µ–¥. –≤–æ–¥—ã/—á–∞—Å`);
                    }
                }
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –æ—Ç –∫–æ–º–Ω–∞—Ç
            const diningCount = 1; // 1 —Å—Ç–æ–ª–æ–≤–∞—è
            const toiletCount = 1; // 1 —Ç—É–∞–ª–µ—Ç
            
            const hourlyFoodFromRooms = Math.round((diningCount * 10) / 24);
            const hourlyWaterFromRooms = Math.round((toiletCount * 10) / 24);
            
            foodProduction += hourlyFoodFromRooms;
            waterProduction += hourlyWaterFromRooms;
            
            log(`üìä –ò—Ç–æ–≥–æ–≤–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ:`);
            log(`   –ï–¥–∞: ${foodProduction} –µ–¥./—á–∞—Å (${foodProduction - hourlyFoodFromRooms} –æ—Ç –∂–∏—Ç–µ–ª–µ–π + ${hourlyFoodFromRooms} –æ—Ç –∫–æ–º–Ω–∞—Ç)`);
            log(`   –í–æ–¥–∞: ${waterProduction} –µ–¥./—á–∞—Å (${waterProduction - hourlyWaterFromRooms} –æ—Ç –∂–∏—Ç–µ–ª–µ–π + ${hourlyWaterFromRooms} –æ—Ç –∫–æ–º–Ω–∞—Ç)`);
            log(`   –†–∞–±–æ—Ç–∞—é—â–∏—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤: ${workingResidents}`);
            
            const dailyFood = foodProduction * 24;
            const dailyWater = waterProduction * 24;
            
            log(`üìÖ –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ:`);
            log(`   –ï–¥–∞: ${dailyFood} –µ–¥./–¥–µ–Ω—å`);
            log(`   –í–æ–¥–∞: ${dailyWater} –µ–¥./–¥–µ–Ω—å`);
            
            if (foodProduction > 0 || waterProduction > 0) {
                updateStatus(`‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–æ! –ï–¥–∞: ${foodProduction}/—á–∞—Å, –í–æ–¥–∞: ${waterProduction}/—á–∞—Å`, 'success');
            } else {
                updateStatus(`‚ùå –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –Ω–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–æ!`, 'error');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–∞
        function clearLog() {
            document.getElementById('log').textContent = '';
            log('üßπ –õ–æ–≥ –æ—á–∏—â–µ–Ω');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            log('üöÄ –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –∑–∞–ø—É—â–µ–Ω');
            log('üìä –ü—Ä–æ–±–ª–µ–º–∞: —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–ª–∞ —Å—Ç–∞—Ç—É—Å—ã —Ç–∏–ø–∞ "—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ [–∫–æ–º–Ω–∞—Ç–µ]"');
            log('üîß –†–µ—à–µ–Ω–∏–µ: –∏–∑–º–µ–Ω–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ startsWith("—Ä–∞–±–æ—Ç–∞–µ—Ç")');
            log('');
            
            updateStatus('‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é', 'success');
        };
    </script>
</body>
</html>
