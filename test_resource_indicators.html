<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ—Å—É—Ä—Å–æ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: #ffffff;
        }
        .test-section {
            background-color: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #444;
        }
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .resource-item {
            background: #1a1a1a;
            border: 2px solid #444;
            padding: 8px;
            font-size: 12px;
            color: #ffffff;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border-radius: 6px;
            position: relative;
            min-height: 60px;
        }
        .resource-item:hover {
            background: #2a2a2a;
            border-color: #ff0000;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3);
        }
        .resource-icon {
            width: 20px;
            height: 20px;
            background-color: #666;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        .resource-value {
            font-weight: bold;
            font-size: 14px;
        }
        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover {
            background-color: #45a049;
        }
        button.negative {
            background-color: #f44336;
        }
        button.negative:hover {
            background-color: #da190b;
        }
        button.percentage {
            background-color: #FFD700;
            color: #000;
        }
        button.percentage:hover {
            background-color: #FFC107;
        }
        .log {
            background-color: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .status.success {
            background-color: #4CAF50;
            color: white;
        }
        .status.info {
            background-color: #2196F3;
            color: white;
        }
        .indicator-info {
            background-color: #333;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border: 1px solid #555;
        }
        .indicator-example {
            display: inline-block;
            margin: 5px;
            padding: 5px 10px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 12px;
        }
        .indicator-positive {
            color: #4CAF50;
            background-color: rgba(76, 175, 80, 0.1);
        }
        .indicator-negative {
            color: #f44336;
            background-color: rgba(244, 67, 54, 0.1);
        }
        .indicator-percentage {
            color: #FFD700;
            background-color: rgba(255, 215, 0, 0.1);
        }
    </style>
</head>
<body>
    <h1>üéØ –¢–µ—Å—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ—Å—É—Ä—Å–æ–≤</h1>
    
    <div class="test-section">
        <h2>üìä –û–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã</h2>
        <div class="indicator-info">
            <h3>üé® –¢–∏–ø—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:</h3>
            <div class="indicator-example indicator-positive">+5 –µ–¥</div>
            <div class="indicator-example indicator-negative">-3 –µ–¥</div>
            <div class="indicator-example indicator-percentage">+10%</div>
            <div class="indicator-example indicator-percentage">-5%</div>
            
            <h3>üîß –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:</h3>
            <ul>
                <li><strong>–ó–µ–ª–µ–Ω—ã–π (+)</strong> - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ (–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ, –Ω–∞—Ö–æ–¥–∫–∏)</li>
                <li><strong>–ö—Ä–∞—Å–Ω—ã–π (-)</strong> - —Ä–∞—Å—Ö–æ–¥ —Ä–µ—Å—É—Ä—Å–æ–≤ (–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ, –ø–æ—Ç–µ—Ä–∏)</li>
                <li><strong>–ó–æ–ª–æ—Ç–æ–π (%)</strong> - –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ (–º–æ—Ä–∞–ª—å, —Å—á–∞—Å—Ç—å–µ, –∑–∞—â–∏—Ç–∞)</li>
            </ul>
            
            <h3>üì± –ê–Ω–∏–º–∞—Ü–∏—è:</h3>
            <ul>
                <li>–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞–¥ —Ä–µ—Å—É—Ä—Å–æ–º</li>
                <li>–ü–ª–∞–≤–Ω–æ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö</li>
                <li>–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∏ –∏—Å—á–µ–∑–∞–µ—Ç —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>üéÆ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤</h2>
        
        <div class="resources-grid">
            <div class="resource-item" id="food">
                <div class="resource-icon">üçñ</div>
                <div class="resource-value">100</div>
            </div>
            <div class="resource-item" id="water">
                <div class="resource-icon">üíß</div>
                <div class="resource-value">80</div>
            </div>
            <div class="resource-item" id="money">
                <div class="resource-icon">üí∞</div>
                <div class="resource-value">500</div>
            </div>
            <div class="resource-item" id="wood">
                <div class="resource-icon">ü™µ</div>
                <div class="resource-value">25</div>
            </div>
            <div class="resource-item" id="metal">
                <div class="resource-icon">üî©</div>
                <div class="resource-value">15</div>
            </div>
            <div class="resource-item" id="happiness">
                <div class="resource-icon">üòä</div>
                <div class="resource-value">85%</div>
            </div>
            <div class="resource-item" id="defense">
                <div class="resource-icon">üõ°Ô∏è</div>
                <div class="resource-value">90%</div>
            </div>
            <div class="resource-item" id="comfort">
                <div class="resource-icon">üõãÔ∏è</div>
                <div class="resource-value">75%</div>
            </div>
            <div class="resource-item" id="moral">
                <div class="resource-icon">‚≠ê</div>
                <div class="resource-value">80%</div>
            </div>
        </div>

        <div class="controls">
            <h3>‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:</h3>
            <button onclick="testResourceChange('food', 5)">üçñ +5 –µ–¥—ã</button>
            <button onclick="testResourceChange('water', 10)">üíß +10 –≤–æ–¥—ã</button>
            <button onclick="testResourceChange('money', 100)">üí∞ +100 –¥–µ–Ω–µ–≥</button>
            <button onclick="testResourceChange('wood', 3)">ü™µ +3 –¥–µ—Ä–µ–≤–∞</button>
            <button onclick="testResourceChange('metal', 2)">üî© +2 –º–µ—Ç–∞–ª–ª–∞</button>
        </div>

        <div class="controls">
            <h3>‚ûñ –†–∞—Å—Ö–æ–¥ —Ä–µ—Å—É—Ä—Å–æ–≤:</h3>
            <button class="negative" onclick="testResourceChange('food', -3)">üçñ -3 –µ–¥—ã</button>
            <button class="negative" onclick="testResourceChange('water', -5)">üíß -5 –≤–æ–¥—ã</button>
            <button class="negative" onclick="testResourceChange('money', -50)">üí∞ -50 –¥–µ–Ω–µ–≥</button>
            <button class="negative" onclick="testResourceChange('wood', -1)">ü™µ -1 –¥–µ—Ä–µ–≤–∞</button>
            <button class="negative" onclick="testResourceChange('metal', -1)">üî© -1 –º–µ—Ç–∞–ª–ª–∞</button>
        </div>

        <div class="controls">
            <h3>üìä –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤:</h3>
            <button class="percentage" onclick="testResourceChange('happiness', 5, true)">üòä +5% —Å—á–∞—Å—Ç—å—è</button>
            <button class="percentage" onclick="testResourceChange('happiness', -3, true)">üòä -3% —Å—á–∞—Å—Ç—å—è</button>
            <button class="percentage" onclick="testResourceChange('defense', 10, true)">üõ°Ô∏è +10% –∑–∞—â–∏—Ç—ã</button>
            <button class="percentage" onclick="testResourceChange('defense', -5, true)">üõ°Ô∏è -5% –∑–∞—â–∏—Ç—ã</button>
            <button class="percentage" onclick="testResourceChange('comfort', 8, true)">üõãÔ∏è +8% –∫–æ–º—Ñ–æ—Ä—Ç–∞</button>
            <button class="percentage" onclick="testResourceChange('comfort', -2, true)">üõãÔ∏è -2% –∫–æ–º—Ñ–æ—Ä—Ç–∞</button>
            <button class="percentage" onclick="testResourceChange('moral', 7, true)">‚≠ê +7% –º–æ—Ä–∞–ª–∏</button>
            <button class="percentage" onclick="testResourceChange('moral', -4, true)">‚≠ê -4% –º–æ—Ä–∞–ª–∏</button>
        </div>

        <div class="controls">
            <h3>üß™ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã:</h3>
            <button onclick="testProduction()">üè≠ –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞</button>
            <button onclick="testConsumption()">üçΩÔ∏è –°–∏–º—É–ª—è—Ü–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è</button>
            <button onclick="testMixedChanges()">üîÑ –°–º–µ—à–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            <button onclick="clearLog()">üßπ –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
        </div>
    </div>

    <div class="test-section">
        <h2>üìù –õ–æ–≥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <div class="log" id="log"></div>
    </div>

    <script>
        // –ò–º–∏—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
        let resources = {
            food: 100,
            water: 80,
            money: 500,
            wood: 25,
            metal: 15,
            happiness: 85,
            defense: 90,
            comfort: 75,
            moral: 80
        };

        // –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        function log(message) {
            const logElement = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollTop + 1000;
        }

        // –§—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞
        function testResourceChange(resourceId, change, isPercentage = false) {
            const oldValue = resources[resourceId];
            resources[resourceId] += change;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            updateResourceDisplay(resourceId);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
            if (window.forceCheckResourceChange) {
                window.forceCheckResourceChange(resourceId, change, false, isPercentage);
                log(`‚úÖ –ü–æ–∫–∞–∑–∞–Ω –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è ${resourceId}: ${change > 0 ? '+' : ''}${change}${isPercentage ? '%' : ' –µ–¥'}`);
            } else {
                log(`‚ùå –§—É–Ω–∫—Ü–∏—è forceCheckResourceChange –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`);
            }
            
            log(`üìä ${resourceId}: ${oldValue}${isPercentage ? '%' : ''} ‚Üí ${resources[resourceId]}${isPercentage ? '%' : ''} (${change > 0 ? '+' : ''}${change}${isPercentage ? '%' : ' –µ–¥'})`);
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞
        function updateResourceDisplay(resourceId) {
            const element = document.getElementById(resourceId);
            if (element) {
                const valueElement = element.querySelector('.resource-value');
                if (valueElement) {
                    const value = resources[resourceId];
                    if (['happiness', 'defense', 'comfort', 'moral'].includes(resourceId)) {
                        valueElement.textContent = `${value}%`;
                    } else {
                        valueElement.textContent = value;
                    }
                }
            }
        }

        // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
        function testProduction() {
            log('üè≠ –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ä–µ—Å—É—Ä—Å–æ–≤...');
            
            // –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –µ–¥—ã –æ—Ç –ø–æ–≤–∞—Ä–∞
            setTimeout(() => testResourceChange('food', 5), 100);
            
            // –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –≤–æ–¥—ã –æ—Ç —Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞
            setTimeout(() => testResourceChange('water', 4), 300);
            
            // –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –¥–µ—Ä–µ–≤–∞ –æ—Ç –ª–µ—Å–æ—Ä—É–±–∞
            setTimeout(() => testResourceChange('wood', 2), 500);
            
            // –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –º–µ—Ç–∞–ª–ª–∞ –æ—Ç —à–∞—Ö—Ç–µ—Ä–∞
            setTimeout(() => testResourceChange('metal', 1), 700);
            
            log('‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –∑–∞–ø—É—â–µ–Ω–æ');
        }

        // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
        function testConsumption() {
            log('üçΩÔ∏è –°–∏–º—É–ª—è—Ü–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤...');
            
            // –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –µ–¥—ã –∂–∏—Ç–µ–ª—è–º–∏
            setTimeout(() => testResourceChange('food', -3), 100);
            
            // –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –≤–æ–¥—ã –∂–∏—Ç–µ–ª—è–º–∏
            setTimeout(() => testResourceChange('water', -2), 300);
            
            // –°–Ω–∏–∂–µ–Ω–∏–µ –º–æ—Ä–∞–ª–∏
            setTimeout(() => testResourceChange('moral', -2, true), 500);
            
            // –°–Ω–∏–∂–µ–Ω–∏–µ —Å—á–∞—Å—Ç—å—è
            setTimeout(() => testResourceChange('happiness', -1, true), 700);
            
            log('‚úÖ –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ');
        }

        // –°–º–µ—à–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
        function testMixedChanges() {
            log('üîÑ –°–∏–º—É–ª—è—Ü–∏—è —Å–º–µ—à–∞–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π...');
            
            // –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
            setTimeout(() => {
                testResourceChange('food', 8);
                testResourceChange('water', 6);
                testResourceChange('happiness', 3, true);
                testResourceChange('defense', 5, true);
            }, 100);
            
            log('‚úÖ –°–º–µ—à–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—â–µ–Ω—ã');
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–∞
        function clearLog() {
            document.getElementById('log').textContent = '';
            log('üßπ –õ–æ–≥ –æ—á–∏—â–µ–Ω');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            log('üöÄ –¢–µ—Å—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ—Å—É—Ä—Å–æ–≤ –∑–∞–ø—É—â–µ–Ω');
            log('üìä –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Ä–µ—Å—É—Ä—Å–æ–≤');
            log('üéØ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞–¥ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –ø–ª–∞–≤–Ω–æ –∏—Å—á–µ–∑–∞—é—Ç');
            log('');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π
            if (window.forceCheckResourceChange) {
                log('‚úÖ –§—É–Ω–∫—Ü–∏—è forceCheckResourceChange –¥–æ—Å—Ç—É–ø–Ω–∞');
            } else {
                log('‚ùå –§—É–Ω–∫—Ü–∏—è forceCheckResourceChange –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
            }
            
            if (window.showResourceChangeIndicator) {
                log('‚úÖ –§—É–Ω–∫—Ü–∏—è showResourceChangeIndicator –¥–æ—Å—Ç—É–ø–Ω–∞');
            } else {
                log('‚ùå –§—É–Ω–∫—Ü–∏—è showResourceChangeIndicator –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
            }
            
            log('');
        };
    </script>
</body>
</html>
