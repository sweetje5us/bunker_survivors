<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –º–æ—Ä–∞–ª–∏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .result {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
            border-left: 4px solid #007bff;
        }
        .error {
            border-left-color: #dc3545;
            background: #f8d7da;
        }
        .success {
            border-left-color: #28a745;
            background: #d4edda;
        }
        .config-info {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –º–æ—Ä–∞–ª–∏</h1>
    
    <div class="test-section">
        <h2>üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</h2>
        <div id="configInfo" class="config-info">
            –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...
        </div>
    </div>

    <div class="test-section">
        <h2>üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤ –∑–∞ —É—Ä–æ–≤–µ–Ω—å</h2>
        <p>–¢–µ—Å—Ç–∏—Ä—É–µ–º, –∫–∞–∫ –º–æ—Ä–∞–ª—å –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –ø—Ä–∏ –ø–æ–≤—ã—à–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω—è:</p>
        <button class="test-button" onclick="testLevelUpBonus()">–¢–µ—Å—Ç –±–æ–Ω—É—Å–∞ –∑–∞ —É—Ä–æ–≤–µ–Ω—å</button>
        <div id="levelUpResult" class="result" style="display: none;"></div>
    </div>

    <div class="test-section">
        <h2>üí∞ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏</h2>
        <p>–¢–µ—Å—Ç–∏—Ä—É–µ–º, –∫–∞–∫ –º–æ—Ä–∞–ª—å –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∫–∏–¥–∫–∏/–Ω–∞—Ü–µ–Ω–∫–∏ –≤ —Ç–æ—Ä–≥–æ–≤–ª–µ:</p>
        <button class="test-button" onclick="testTradingQuality()">–¢–µ—Å—Ç –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏</button>
        <div id="tradingResult" class="result" style="display: none;"></div>
    </div>

    <div class="test-section">
        <h2>üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ—Ä–∞–ª–∏</h2>
        <p>–¢–µ—Å—Ç–∏—Ä—É–µ–º, –∫–∞–∫ –∫–æ–º—Ñ–æ—Ä—Ç –≤–ª–∏—è–µ—Ç –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ—Ä–∞–ª–∏:</p>
        <button class="test-button" onclick="testMoraleRecovery()">–¢–µ—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ—Ä–∞–ª–∏</button>
        <div id="recoveryResult" class="result" style="display: none;"></div>
    </div>

    <div class="test-section">
        <h2>üéÆ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–π</h2>
        <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–µ—Ç–æ–¥–æ–≤ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ –∏–≥—Ä—ã:</p>
        <button class="test-button" onclick="testGameIntegration()">–¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</button>
        <div id="integrationResult" class="result" style="display: none;"></div>
    </div>

    <script>
        // –ò–º–∏—Ç–∞—Ü–∏—è ConfigManager –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        class MockConfigManager {
            constructor() {
                this.moraleSystem = {
                    maxMorale: 100,
                    levelUpBonus: {
                        high: { min: 80, bonus: 2 },
                        medium: { min: 60, bonus: 1 },
                        low: { min: 0, bonus: 0 }
                    },
                    tradingQuality: {
                        high: { min: 80, discount: 50 },
                        medium: { min: 60, discount: 25 },
                        normal: { min: 40, discount: 0 },
                        low: { min: 20, markup: 25 },
                        critical: { min: 0, markup: 50 }
                    },
                    comfortRecovery: {
                        enabled: true,
                        high: { min: 80, recoveryPerHour: 0.5 },
                        medium: { min: 60, recoveryPerHour: 0.2 },
                        low: { min: 0, recoveryPerHour: 0 }
                    }
                };
            }

            getMaxMorale() { return this.moraleSystem.maxMorale; }
            
            getMoraleLevelUpBonus(morale) {
                const thresholds = this.moraleSystem.levelUpBonus;
                if (morale >= thresholds.high.min) return thresholds.high.bonus;
                if (morale >= thresholds.medium.min) return thresholds.medium.bonus;
                return thresholds.low.bonus;
            }
            
            getMoraleTradingQuality(morale) {
                const thresholds = this.moraleSystem.tradingQuality;
                if (morale >= thresholds.high.min) return { type: 'discount', value: thresholds.high.discount };
                if (morale >= thresholds.medium.min) return { type: 'discount', value: thresholds.medium.discount };
                if (morale >= thresholds.normal.min) return { type: 'discount', value: thresholds.normal.discount };
                if (morale >= thresholds.low.min) return { type: 'markup', value: thresholds.low.markup };
                return { type: 'markup', value: thresholds.critical.markup };
            }
            
            getMoraleComfortRecovery(comfort) {
                if (!this.moraleSystem.comfortRecovery.enabled) return 0;
                const thresholds = this.moraleSystem.comfortRecovery;
                if (comfort >= thresholds.high.min) return thresholds.high.recoveryPerHour;
                if (comfort >= thresholds.medium.min) return thresholds.medium.recoveryPerHour;
                return thresholds.low.recoveryPerHour;
            }
        }

        const mockConfig = new MockConfigManager();

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        function showConfigInfo() {
            const configInfo = document.getElementById('configInfo');
            configInfo.innerHTML = `
                <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã –º–æ—Ä–∞–ª–∏:</h3>
                <ul>
                    <li><strong>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –º–æ—Ä–∞–ª—å:</strong> ${mockConfig.getMaxMorale()}%</li>
                    <li><strong>–ë–æ–Ω—É—Å –∑–∞ —É—Ä–æ–≤–µ–Ω—å –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –º–æ—Ä–∞–ª–∏ (80%+):</strong> +${mockConfig.getMoraleLevelUpBonus(85)} –æ—á–∫–∞</li>
                    <li><strong>–ë–æ–Ω—É—Å –∑–∞ —É—Ä–æ–≤–µ–Ω—å –ø—Ä–∏ —Å—Ä–µ–¥–Ω–µ–π –º–æ—Ä–∞–ª–∏ (60-79%):</strong> +${mockConfig.getMoraleLevelUpBonus(70)} –æ—á–∫–∞</li>
                    <li><strong>–ë–æ–Ω—É—Å –∑–∞ —É—Ä–æ–≤–µ–Ω—å –ø—Ä–∏ –Ω–∏–∑–∫–æ–π –º–æ—Ä–∞–ª–∏ (0-59%):</strong> +${mockConfig.getMoraleLevelUpBonus(30)} –æ—á–∫–∞</li>
                    <li><strong>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ—Ä–∞–ª–∏ –æ—Ç –∫–æ–º—Ñ–æ—Ä—Ç–∞:</strong> –í–∫–ª—é—á–µ–Ω–æ</li>
                </ul>
            `;
        }

        // –¢–µ—Å—Ç –±–æ–Ω—É—Å–∞ –∑–∞ —É—Ä–æ–≤–µ–Ω—å
        function testLevelUpBonus() {
            const result = document.getElementById('levelUpResult');
            result.style.display = 'block';
            
            let html = '<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞ –±–æ–Ω—É—Å–∞ –∑–∞ —É—Ä–æ–≤–µ–Ω—å:</h3>';
            
            const testCases = [95, 85, 75, 65, 55, 45, 35, 25, 15, 5];
            
            testCases.forEach(morale => {
                const bonus = mockConfig.getMoraleLevelUpBonus(morale);
                const basePoints = 3; // –ë–∞–∑–æ–≤—ã–µ –æ—á–∫–∏ –∑–∞ —É—Ä–æ–≤–µ–Ω—å
                const total = basePoints + bonus;
                
                html += `
                    <div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 4px;">
                        <strong>–ú–æ—Ä–∞–ª—å ${morale}%:</strong> 
                        –ë–∞–∑–æ–≤—ã–µ ${basePoints} + –±–æ–Ω—É—Å ${bonus} = <strong>${total} –æ—á–∫–æ–≤</strong>
                        ${bonus > 0 ? 'üéâ' : 'üòê'}
                    </div>
                `;
            });
            
            result.innerHTML = html;
            result.className = 'result success';
        }

        // –¢–µ—Å—Ç –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏
        function testTradingQuality() {
            const result = document.getElementById('tradingResult');
            result.style.display = 'block';
            
            let html = '<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏:</h3>';
            
            const testCases = [95, 85, 75, 65, 55, 45, 35, 25, 15, 5];
            
            testCases.forEach(morale => {
                const trading = mockConfig.getMoraleTradingQuality(morale);
                const icon = trading.type === 'discount' ? 'üí∞' : 'üí∏';
                
                html += `
                    <div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 4px;">
                        <strong>–ú–æ—Ä–∞–ª—å ${morale}%:</strong> 
                        ${icon} ${trading.type === 'discount' ? '–°–∫–∏–¥–∫–∞' : '–ù–∞—Ü–µ–Ω–∫–∞'} ${trading.value}%
                        ${trading.type === 'discount' ? 'üéØ' : '‚ö†Ô∏è'}
                    </div>
                `;
            });
            
            result.innerHTML = html;
            result.className = 'result success';
        }

        // –¢–µ—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ—Ä–∞–ª–∏
        function testMoraleRecovery() {
            const result = document.getElementById('recoveryResult');
            result.style.display = 'block';
            
            let html = '<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ—Ä–∞–ª–∏:</h3>';
            
            const testCases = [95, 85, 75, 65, 55, 45, 35, 25, 15, 5];
            
            testCases.forEach(comfort => {
                const recovery = mockConfig.getMoraleComfortRecovery(comfort);
                
                html += `
                    <div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 4px;">
                        <strong>–ö–æ–º—Ñ–æ—Ä—Ç ${comfort}%:</strong> 
                        –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ—Ä–∞–ª–∏: <strong>+${recovery}/—á–∞—Å</strong>
                        ${recovery > 0 ? 'üîÑ' : '‚è∏Ô∏è'}
                    </div>
                `;
            });
            
            result.innerHTML = html;
            result.className = 'result success';
        }

        // –¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∏–≥—Ä–æ–π
        function testGameIntegration() {
            const result = document.getElementById('integrationResult');
            result.style.display = 'block';
            
            let html = '<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:</h3>';
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–µ—Ç–æ–¥–æ–≤ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ –∏–≥—Ä—ã
            if (typeof window !== 'undefined' && window.game) {
                const game = window.game;
                
                html += '<div style="color: green;">‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –∏–≥—Ä—ã –¥–æ—Å—Ç—É–ø–µ–Ω</div>';
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–µ—Ç–æ–¥—ã –º–æ—Ä–∞–ª–∏
                if (typeof game.getTradingQualityInfo === 'function') {
                    html += '<div style="color: green;">‚úÖ –ú–µ—Ç–æ–¥ getTradingQualityInfo –¥–æ—Å—Ç—É–ø–µ–Ω</div>';
                } else {
                    html += '<div style="color: red;">‚ùå –ú–µ—Ç–æ–¥ getTradingQualityInfo –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</div>';
                }
                
                if (typeof game.getCurrentMoral === 'function') {
                    html += '<div style="color: green;">‚úÖ –ú–µ—Ç–æ–¥ getCurrentMoral –¥–æ—Å—Ç—É–ø–µ–Ω</div>';
                } else {
                    html += '<div style="color: red;">‚ùå –ú–µ—Ç–æ–¥ getCurrentMoral –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</div>';
                }
                
            } else {
                html += '<div style="color: orange;">‚ö†Ô∏è –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –∏–≥—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–∏–≥—Ä–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞)</div>';
                html += '<div>–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É, —á—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é</div>';
            }
            
            result.innerHTML = html;
            result.className = 'result';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', () => {
            showConfigInfo();
        });
    </script>
</body>
</html>
