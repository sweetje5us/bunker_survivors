<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ä–µ—Å—É—Ä—Å–æ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: #ffffff;
        }
        .test-section {
            background-color: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #444;
        }
        .production-display {
            background-color: #333;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border: 1px solid #555;
        }
        .production-step {
            margin: 10px 0;
            padding: 8px;
            background-color: #444;
            border-radius: 3px;
            border-left: 3px solid #4CAF50;
        }
        .production-result {
            font-weight: bold;
            color: #4CAF50;
        }
        .production-formula {
            font-family: monospace;
            color: #FFD700;
            background-color: #222;
            padding: 5px;
            border-radius: 3px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover {
            background-color: #45a049;
        }
        .log {
            background-color: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .status.success {
            background-color: #4CAF50;
            color: white;
        }
        .status.warning {
            background-color: #ff9800;
            color: white;
        }
        .status.error {
            background-color: #f44336;
            color: white;
        }
        .resource-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        .resource-card {
            background-color: #333;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #555;
        }
        .resource-title {
            font-size: 18px;
            font-weight: bold;
            color: #4CAF50;
            margin-bottom: 10px;
        }
        .resource-value {
            font-size: 14px;
            margin: 5px 0;
        }
        .resident-list {
            background-color: #333;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border: 1px solid #555;
        }
        .resident-item {
            background-color: #444;
            padding: 10px;
            margin: 5px 0;
            border-radius: 3px;
            border-left: 3px solid #2196F3;
        }
        .resident-working {
            border-left-color: #4CAF50;
        }
        .resident-idle {
            border-left-color: #FF9800;
        }
        .simulation-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .input-group label {
            font-size: 12px;
            color: #ccc;
        }
        .input-group input, .input-group select {
            padding: 5px;
            border: 1px solid #555;
            border-radius: 3px;
            background-color: #333;
            color: white;
        }
    </style>
</head>
<body>
    <h1>üè≠ –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ä–µ—Å—É—Ä—Å–æ–≤</h1>
    
    <div class="test-section">
        <h2>üìä –¢–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h2>
        <div class="resource-info" id="resourceInfo">
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ—Å—É—Ä—Å–∞—Ö –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>
        
        <div class="status success" id="status">
            ‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
        </div>
    </div>

    <div class="test-section">
        <h2>üë• –ñ–∏—Ç–µ–ª–∏ –±—É–Ω–∫–µ—Ä–∞</h2>
        <div class="resident-list" id="residentList">
            <!-- –°–ø–∏—Å–æ–∫ –∂–∏—Ç–µ–ª–µ–π –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>
    </div>

    <div class="test-section">
        <h2>üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–º</h2>
        <div class="simulation-controls">
            <div class="input-group">
                <label>–î–æ–±–∞–≤–∏—Ç—å –ø–æ–≤–∞—Ä–∞</label>
                <button onclick="addResident('–ø–æ–≤–∞—Ä')">+ –ü–æ–≤–∞—Ä</button>
            </div>
            <div class="input-group">
                <label>–î–æ–±–∞–≤–∏—Ç—å —Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞</label>
                <button onclick="addResident('—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫')">+ –°–∞–Ω—Ç–µ—Ö–Ω–∏–∫</button>
            </div>
            <div class="input-group">
                <label>–î–æ–±–∞–≤–∏—Ç—å –æ–±—ã—á–Ω–æ–≥–æ –∂–∏—Ç–µ–ª—è</label>
                <button onclick="addResident('–±–µ–∑—Ä–∞–±–æ—Ç–Ω—ã–π')">+ –ñ–∏—Ç–µ–ª—å</button>
            </div>
            <div class="input-group">
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ–ª–æ–≤—ã—Ö</label>
                <input type="number" id="diningCount" value="1" min="0" max="10">
            </div>
            <div class="input-group">
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—É–∞–ª–µ—Ç–æ–≤</label>
                <input type="number" id="toiletCount" value="1" min="0" max="10">
            </div>
        </div>
        
        <div class="simulation-controls">
            <button onclick="simulateHour()">‚è∞ –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å 1 —á–∞—Å</button>
            <button onclick="simulateDay()">üåÖ –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å 1 –¥–µ–Ω—å</button>
            <button onclick="toggleAllWork()">üîÑ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö</button>
            <button onclick="clearLog()">üßπ –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
        </div>
    </div>

    <div class="test-section">
        <h2>üìù –õ–æ–≥ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞</h2>
        <div class="log" id="log"></div>
    </div>

    <script>
        // –ò–º–∏—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä—ã
        let gameData = {
            difficulty: 'hard',
            dayNumber: 1,
            food: 100,
            water: 100,
            diningCount: 1,
            toiletCount: 1
        };

        let residents = [
            { id: 1, name: '–ò–≤–∞–Ω', profession: '–ø–æ–≤–∞—Ä', status: '—Ä–∞–±–æ—Ç–∞–µ—Ç', working: true },
            { id: 2, name: '–ü–µ—Ç—Ä', profession: '—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫', status: '—Ä–∞–±–æ—Ç–∞–µ—Ç', working: true }
        ];

        // –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        function log(message) {
            const logElement = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollTop + 1000;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
        function updateStatus(message, type = 'success') {
            const statusElement = document.getElementById('status');
            statusElement.textContent = message;
            statusElement.className = `status ${type}`;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
        function updateResourceDisplay() {
            const display = document.getElementById('resourceInfo');
            display.innerHTML = `
                <div class="resource-card">
                    <div class="resource-title">üçñ –ï–¥–∞</div>
                    <div class="resource-value">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${gameData.food}</div>
                    <div class="resource-value">–°—Ç–æ–ª–æ–≤—ã–µ: ${gameData.diningCount}</div>
                </div>
                <div class="resource-card">
                    <div class="resource-title">üíß –í–æ–¥–∞</div>
                    <div class="resource-value">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${gameData.water}</div>
                    <div class="resource-value">–¢—É–∞–ª–µ—Ç—ã: ${gameData.toiletCount}</div>
                </div>
                <div class="resource-card">
                    <div class="resource-title">‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã</div>
                    <div class="resource-value">–°–ª–æ–∂–Ω–æ—Å—Ç—å: ${gameData.difficulty}</div>
                    <div class="resource-value">–î–µ–Ω—å: ${gameData.dayNumber}</div>
                    <div class="resource-value">–ñ–∏—Ç–µ–ª–∏: ${residents.length}</div>
                </div>
            `;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∂–∏—Ç–µ–ª–µ–π
        function updateResidentList() {
            const display = document.getElementById('residentList');
            let html = '';
            
            residents.forEach(resident => {
                const statusClass = resident.working ? 'resident-working' : 'resident-idle';
                const statusText = resident.working ? 'üü¢ –†–∞–±–æ—Ç–∞–µ—Ç' : 'üü° –û—Ç–¥—ã—Ö–∞–µ—Ç';
                
                html += `
                    <div class="resident-item ${statusClass}">
                        <div><strong>${resident.name}</strong> (${resident.profession})</div>
                        <div>–°—Ç–∞—Ç—É—Å: ${statusText}</div>
                        <div>ID: ${resident.id}</div>
                        <button onclick="toggleWork(${resident.id})" style="margin-top: 5px; padding: 5px 10px; font-size: 12px;">
                            ${resident.working ? '–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É' : '–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É'}
                        </button>
                    </div>
                `;
            });
            
            display.innerHTML = html;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∂–∏—Ç–µ–ª—è
        function addResident(profession) {
            const id = residents.length + 1;
            const names = ['–ê–ª–µ–∫—Å–µ–π', '–ò–≤–∞–Ω', '–ü–µ—Ç—Ä', '–°–µ—Ä–≥–µ–π', '–î–º–∏—Ç—Ä–∏–π', '–ê–Ω–Ω–∞', '–ú–∞—Ä–∏—è', '–û–ª—å–≥–∞', '–ï–ª–µ–Ω–∞', '–¢–∞—Ç—å—è–Ω–∞'];
            const name = names[id % names.length];
            
            residents.push({
                id: id,
                name: name,
                profession: profession,
                status: '–æ—Ç–¥—ã—Ö–∞–µ—Ç',
                working: false
            });
            
            log(`üë§ –î–æ–±–∞–≤–ª–µ–Ω –∂–∏—Ç–µ–ª—å: ${name} (${profession})`);
            updateResidentList();
            updateResourceDisplay();
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –∂–∏—Ç–µ–ª—è
        function toggleWork(residentId) {
            const resident = residents.find(r => r.id === residentId);
            if (resident) {
                resident.working = !resident.working;
                resident.status = resident.working ? '—Ä–∞–±–æ—Ç–∞–µ—Ç' : '–æ—Ç–¥—ã—Ö–∞–µ—Ç';
                log(`üîÑ ${resident.name} ${resident.working ? '–Ω–∞—á–∞–ª' : '–æ—Å—Ç–∞–Ω–æ–≤–∏–ª'} —Ä–∞–±–æ—Ç—É`);
                updateResidentList();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –∂–∏—Ç–µ–ª–µ–π
        function toggleAllWork() {
            const allWorking = residents.every(r => r.working);
            residents.forEach(resident => {
                resident.working = !allWorking;
                resident.status = resident.working ? '—Ä–∞–±–æ—Ç–∞–µ—Ç' : '–æ—Ç–¥—ã—Ö–∞–µ—Ç';
            });
            
            const action = allWorking ? '–æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏' : '–Ω–∞—á–∞–ª–∏';
            log(`üîÑ –í—Å–µ –∂–∏—Ç–µ–ª–∏ ${action} —Ä–∞–±–æ—Ç—É`);
            updateResidentList();
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–∏–º—É–ª—è—Ü–∏–∏ —á–∞—Å–∞
        function simulateHour() {
            log('‚è∞ –°–∏–º—É–ª—è—Ü–∏—è 1 —á–∞—Å–∞...');
            
            let foodProduction = 0;
            let waterProduction = 0;
            let workingResidents = 0;
            
            // –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –æ—Ç —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –∂–∏—Ç–µ–ª–µ–π
            residents.forEach(resident => {
                if (resident.working) {
                    if (resident.profession === '–ø–æ–≤–∞—Ä') {
                        const production = 5; // 5 –µ–¥. –µ–¥—ã –≤ —á–∞—Å
                        foodProduction += production;
                        log(`üç≥ –ü–æ–≤–∞—Ä ${resident.name} –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç ${production} –µ–¥. –µ–¥—ã`);
                    }
                    
                    if (resident.profession === '—Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫') {
                        const production = 4; // 4 –µ–¥. –≤–æ–¥—ã –≤ —á–∞—Å
                        waterProduction += production;
                        log(`üîß –°–∞–Ω—Ç–µ—Ö–Ω–∏–∫ ${resident.name} –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç ${production} –µ–¥. –≤–æ–¥—ã`);
                    }
                    
                    workingResidents++;
                }
            });
            
            // –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –æ—Ç –∫–æ–º–Ω–∞—Ç (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ —á–∞—Å–∞–º)
            const hourlyFoodFromRooms = Math.round((gameData.diningCount * 10) / 24);
            const hourlyWaterFromRooms = Math.round((gameData.toiletCount * 10) / 24);
            
            foodProduction += hourlyFoodFromRooms;
            waterProduction += hourlyWaterFromRooms;
            
            if (foodProduction > 0 || waterProduction > 0) {
                log(`üìä –ü–æ—á–∞—Å–æ–≤–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ: –µ–¥–∞ +${foodProduction} (${hourlyFoodFromRooms} –æ—Ç –∫–æ–º–Ω–∞—Ç), –≤–æ–¥–∞ +${waterProduction} (${hourlyWaterFromRooms} –æ—Ç –∫–æ–º–Ω–∞—Ç)`);
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ—Å—É—Ä—Å—ã
                gameData.food += foodProduction;
                gameData.water += waterProduction;
                
                log(`‚úÖ –†–µ—Å—É—Ä—Å—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã: –µ–¥–∞=${gameData.food}, –≤–æ–¥–∞=${gameData.water}`);
            } else {
                log(`‚ÑπÔ∏è –ù–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ —ç—Ç–æ—Ç —á–∞—Å`);
            }
            
            log(`üìà –†–∞–±–æ—Ç–∞—é—â–∏—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤: ${workingResidents}`);
            log('---');
            
            updateResourceDisplay();
            updateStatus(`‚úÖ –ß–∞—Å —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω. –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ: –µ–¥–∞ +${foodProduction}, –≤–æ–¥–∞ +${waterProduction}`, 'success');
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–∏–º—É–ª—è—Ü–∏–∏ –¥–Ω—è
        function simulateDay() {
            log('üåÖ –°–∏–º—É–ª—è—Ü–∏—è 1 –¥–Ω—è (24 —á–∞—Å–∞)...');
            
            for (let hour = 1; hour <= 24; hour++) {
                log(`‚è∞ –ß–∞—Å ${hour}:`);
                simulateHour();
            }
            
            log('üåÖ –î–µ–Ω—å –∑–∞–≤–µ—Ä—à–µ–Ω!');
            gameData.dayNumber++;
            updateResourceDisplay();
            updateStatus(`‚úÖ –î–µ–Ω—å ${gameData.dayNumber} –∑–∞–≤–µ—Ä—à–µ–Ω`, 'success');
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–∞
        function clearLog() {
            document.getElementById('log').textContent = '';
            log('üßπ –õ–æ–≥ –æ—á–∏—â–µ–Ω');
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–º–Ω–∞—Ç
        function updateRoomCounts() {
            gameData.diningCount = parseInt(document.getElementById('diningCount').value) || 0;
            gameData.toiletCount = parseInt(document.getElementById('toiletCount').value) || 0;
            updateResourceDisplay();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            log('üöÄ –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –∑–∞–ø—É—â–µ–Ω');
            log('üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä—ã:');
            log(`   –°–ª–æ–∂–Ω–æ—Å—Ç—å: ${gameData.difficulty}`);
            log(`   –î–µ–Ω—å: ${gameData.dayNumber}`);
            log(`   –ñ–∏—Ç–µ–ª–∏: ${residents.length}`);
            log(`   –°—Ç–æ–ª–æ–≤—ã–µ: ${gameData.diningCount}`);
            log(`   –¢—É–∞–ª–µ—Ç—ã: ${gameData.toiletCount}`);
            log('');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
            document.getElementById('diningCount').addEventListener('change', updateRoomCounts);
            document.getElementById('toiletCount').addEventListener('change', updateRoomCounts);
            
            updateResourceDisplay();
            updateResidentList();
        };
    </script>
</body>
</html>
