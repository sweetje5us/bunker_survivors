<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: #ffffff;
        }
        .test-section {
            background-color: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #444;
        }
        .resource-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        .resource-item {
            background-color: #333;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            border: 1px solid #555;
        }
        .resource-value {
            font-size: 18px;
            font-weight: bold;
            color: #4CAF50;
        }
        .resource-label {
            font-size: 12px;
            color: #aaa;
            margin-top: 5px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover {
            background-color: #45a049;
        }
        .log {
            background-color: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .status.success {
            background-color: #4CAF50;
            color: white;
        }
        .status.warning {
            background-color: #ff9800;
            color: white;
        }
        .status.error {
            background-color: #f44336;
            color: white;
        }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤</h1>
    
    <div class="test-section">
        <h2>üìä –¢–µ–∫—É—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã</h2>
        <div class="resource-display" id="resourceDisplay">
            <!-- –†–µ—Å—É—Ä—Å—ã –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>
        
        <div class="status success" id="status">
            ‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
        </div>
    </div>

    <div class="test-section">
        <h2>üéØ –¢–µ—Å—Ç—ã</h2>
        <button onclick="testResourceConsumption()">–¢–µ—Å—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤</button>
        <button onclick="testResourceAddition()">–¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤</button>
        <button onclick="testResourceModification()">–¢–µ—Å—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤</button>
        <button onclick="clearLog()">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
    </div>

    <div class="test-section">
        <h2>üìù –õ–æ–≥ –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
        <div class="log" id="log"></div>
    </div>

    <script>
        // –ò–º–∏—Ç–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –∏–≥—Ä—ã
        let gameResources = {
            food: 100,
            water: 100,
            happiness: 100,
            defense: 100,
            ammo: 200,
            comfort: 100,
            moral: 100,
            money: 500,
            wood: 100,
            metal: 100,
            coal: 100,
            nails: 100,
            paper: 100,
            glass: 100
        };

        // –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        function log(message) {
            const logElement = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollTop + 1000;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
        function updateResourceDisplay() {
            const display = document.getElementById('resourceDisplay');
            display.innerHTML = '';
            
            Object.entries(gameResources).forEach(([key, value]) => {
                const item = document.createElement('div');
                item.className = 'resource-item';
                
                const valueElement = document.createElement('div');
                valueElement.className = 'resource-value';
                valueElement.textContent = Math.round(value);
                
                const labelElement = document.createElement('div');
                labelElement.className = 'resource-label';
                labelElement.textContent = key;
                
                item.appendChild(valueElement);
                item.appendChild(labelElement);
                display.appendChild(item);
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
        function updateStatus(message, type = 'success') {
            const statusElement = document.getElementById('status');
            statusElement.textContent = message;
            statusElement.className = `status ${type}`;
        }

        // –¢–µ—Å—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (–∏–º–∏—Ç–∞—Ü–∏—è –ø–æ—á–∞—Å–æ–≤–æ–≥–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è)
        function testResourceConsumption() {
            log('üß™ –¢–µ—Å—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤...');
            
            const oldFood = gameResources.food;
            const oldWater = gameResources.water;
            
            // –ò–º–∏—Ç–∏—Ä—É–µ–º –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Å –¥—Ä–æ–±–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
            const foodConsumption = 4.8; // 4 –∂–∏—Ç–µ–ª—è * 1.2 –º–Ω–æ–∂–∏—Ç–µ–ª—å
            const waterConsumption = 4.8;
            
            log(`üìä –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ: –µ–¥–∞=${foodConsumption}, –≤–æ–¥–∞=${waterConsumption}`);
            log(`üìä –î–æ: –µ–¥–∞=${oldFood}, –≤–æ–¥–∞=${oldWater}`);
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º (–∫–∞–∫ –≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–º –∫–æ–¥–µ)
            gameResources.food = Math.max(0, Math.round(gameResources.food - foodConsumption));
            gameResources.water = Math.max(0, Math.round(gameResources.water - waterConsumption));
            
            log(`üìä –ü–æ—Å–ª–µ: –µ–¥–∞=${gameResources.food}, –≤–æ–¥–∞=${gameResources.water}`);
            log(`üìä –ò–∑–º–µ–Ω–µ–Ω–∏–µ: –µ–¥–∞=${oldFood - gameResources.food}, –≤–æ–¥–∞=${oldWater - gameResources.water}`);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ü–µ–ª—ã–µ
            if (Number.isInteger(gameResources.food) && Number.isInteger(gameResources.water)) {
                log('‚úÖ –†–µ—Å—É—Ä—Å—ã –æ–∫—Ä—É–≥–ª–µ–Ω—ã –¥–æ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª');
                updateStatus('‚úÖ –¢–µ—Å—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø—Ä–æ–π–¥–µ–Ω - —Ä–µ—Å—É—Ä—Å—ã –æ–∫—Ä—É–≥–ª–µ–Ω—ã', 'success');
            } else {
                log('‚ùå –û–®–ò–ë–ö–ê: –†–µ—Å—É—Ä—Å—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –¥—Ä–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!');
                updateStatus('‚ùå –¢–µ—Å—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø—Ä–æ–≤–∞–ª–µ–Ω - –¥—Ä–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è', 'error');
            }
            
            updateResourceDisplay();
        }

        // –¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
        function testResourceAddition() {
            log('üß™ –¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤...');
            
            const oldFood = gameResources.food;
            const oldWater = gameResources.water;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –¥—Ä–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
            const foodToAdd = 3.7;
            const waterToAdd = 2.9;
            
            log(`üìä –î–æ–±–∞–≤–ª—è–µ–º: –µ–¥–∞=${foodToAdd}, –≤–æ–¥–∞=${waterToAdd}`);
            log(`üìä –î–æ: –µ–¥–∞=${oldFood}, –≤–æ–¥–∞=${oldWater}`);
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º (–∫–∞–∫ –≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–º –∫–æ–¥–µ)
            gameResources.food = Math.max(0, Math.round(gameResources.food + foodToAdd));
            gameResources.water = Math.max(0, Math.round(gameResources.water + waterToAdd));
            
            log(`üìä –ü–æ—Å–ª–µ: –µ–¥–∞=${gameResources.food}, –≤–æ–¥–∞=${gameResources.water}`);
            log(`üìä –ò–∑–º–µ–Ω–µ–Ω–∏–µ: –µ–¥–∞=${gameResources.food - oldFood}, –≤–æ–¥–∞=${gameResources.water - oldWater}`);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ü–µ–ª—ã–µ
            if (Number.isInteger(gameResources.food) && Number.isInteger(gameResources.water)) {
                log('‚úÖ –†–µ—Å—É—Ä—Å—ã –æ–∫—Ä—É–≥–ª–µ–Ω—ã –¥–æ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª');
                updateStatus('‚úÖ –¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–π–¥–µ–Ω - —Ä–µ—Å—É—Ä—Å—ã –æ–∫—Ä—É–≥–ª–µ–Ω—ã', 'success');
            } else {
                log('‚ùå –û–®–ò–ë–ö–ê: –†–µ—Å—É—Ä—Å—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –¥—Ä–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!');
                updateStatus('‚ùå –¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–∞–ª–µ–Ω - –¥—Ä–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è', 'error');
            }
            
            updateResourceDisplay();
        }

        // –¢–µ—Å—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ (–∏–º–∏—Ç–∞—Ü–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏)
        function testResourceModification() {
            log('üß™ –¢–µ—Å—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤...');
            
            const oldHappiness = gameResources.happiness;
            const oldComfort = gameResources.comfort;
            const oldMoral = gameResources.moral;
            
            // –ò–º–∏—Ç–∏—Ä—É–µ–º –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Å –¥—Ä–æ–±–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
            const happinessModifier = 5.3;
            const comfortModifier = -2.7;
            const moralRecovery = 3.8;
            
            log(`üìä –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã: —Å—á–∞—Å—Ç—å–µ=${happinessModifier}, –∫–æ–º—Ñ–æ—Ä—Ç=${comfortModifier}, –º–æ—Ä–∞–ª—å=${moralRecovery}`);
            log(`üìä –î–æ: —Å—á–∞—Å—Ç—å–µ=${oldHappiness}, –∫–æ–º—Ñ–æ—Ä—Ç=${oldComfort}, –º–æ—Ä–∞–ª—å=${oldMoral}`);
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º (–∫–∞–∫ –≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–º –∫–æ–¥–µ)
            gameResources.happiness = Math.max(0, Math.min(100, Math.round(gameResources.happiness + happinessModifier)));
            gameResources.comfort = Math.max(0, Math.min(100, Math.round(gameResources.comfort + comfortModifier)));
            gameResources.moral = Math.min(100, Math.round(gameResources.moral + moralRecovery));
            
            log(`üìä –ü–æ—Å–ª–µ: —Å—á–∞—Å—Ç—å–µ=${gameResources.happiness}, –∫–æ–º—Ñ–æ—Ä—Ç=${gameResources.comfort}, –º–æ—Ä–∞–ª—å=${gameResources.moral}`);
            log(`üìä –ò–∑–º–µ–Ω–µ–Ω–∏–µ: —Å—á–∞—Å—Ç—å–µ=${gameResources.happiness - oldHappiness}, –∫–æ–º—Ñ–æ—Ä—Ç=${gameResources.comfort - oldComfort}, –º–æ—Ä–∞–ª—å=${gameResources.moral - oldMoral}`);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ü–µ–ª—ã–µ
            if (Number.isInteger(gameResources.happiness) && Number.isInteger(gameResources.comfort) && Number.isInteger(gameResources.moral)) {
                log('‚úÖ –†–µ—Å—É—Ä—Å—ã –æ–∫—Ä—É–≥–ª–µ–Ω—ã –¥–æ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª');
                updateStatus('‚úÖ –¢–µ—Å—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–π–¥–µ–Ω - —Ä–µ—Å—É—Ä—Å—ã –æ–∫—Ä—É–≥–ª–µ–Ω—ã', 'success');
            } else {
                log('‚ùå –û–®–ò–ë–ö–ê: –†–µ—Å—É—Ä—Å—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –¥—Ä–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!');
                updateStatus('‚ùå –¢–µ—Å—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–ª–µ–Ω - –¥—Ä–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è', 'error');
            }
            
            updateResourceDisplay();
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–∞
        function clearLog() {
            document.getElementById('log').textContent = '';
            log('üßπ –õ–æ–≥ –æ—á–∏—â–µ–Ω');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            log('üöÄ –¢–µ—Å—Ç –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –∑–∞–ø—É—â–µ–Ω');
            log('üìä –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã —Ü–µ–ª—ã–µ
            const allIntegers = Object.values(gameResources).every(value => Number.isInteger(value));
            if (allIntegers) {
                log('‚úÖ –í—Å–µ —Ä–µ—Å—É—Ä—Å—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞');
                updateStatus('‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é', 'success');
            } else {
                log('‚ùå –û–®–ò–ë–ö–ê: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—Å—É—Ä—Å—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –¥—Ä–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!');
                updateStatus('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏', 'error');
            }
            
            updateResourceDisplay();
        };
    </script>
</body>
</html>
