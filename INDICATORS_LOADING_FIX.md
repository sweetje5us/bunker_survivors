# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

## üö® **–ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞!**

–§—É–Ω–∫—Ü–∏–∏ `forceCheckResourceChange` –∏ `showResourceChangeIndicator` **–æ–±—ä—è–≤–ª–µ–Ω—ã** –≤ `game-overlay.html`, –Ω–æ **–Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** –≤ `window` –æ–±—ä–µ–∫—Ç.

## üîç **–ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã:**

1. **`game-overlay.html` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è** —á–µ—Ä–µ–∑ `fetch()` –≤ `ui-manager.js`
2. **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è** –≤ DOM **–ø–æ—Å–ª–µ** –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ GameScene
3. **GameScene —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** –∏ –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã—Ö –µ—â–µ –Ω–µ—Ç
4. **–ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π** - GameScene –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Ä–∞–Ω—å—à–µ HTML

## üõ†Ô∏è **–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

### 1. **–î–æ–±–∞–≤–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π** –≤ `ui-manager.js`
```javascript
// –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ HTML overlay
this.checkIndicatorsLoaded();

// –ú–µ—Ç–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–π
checkIndicatorsLoaded() {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 100ms –≤ —Ç–µ—á–µ–Ω–∏–µ 5 —Å–µ–∫—É–Ω–¥
  // –õ–æ–≥–∏—Ä—É–µ–º —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π
}
```

### 2. **–£–ª—É—á—à–∏–ª–∏ –ª–æ–≥–∏–∫—É –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏** –≤ `GameScene.ts`
```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
private checkIndicatorsReady(): void {
  // –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–∞–∂–¥—ã–µ 100ms
  // –õ–æ–≥–∏—Ä—É–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π
}
```

## üß™ **–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:**

### **–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ UI overlay:**
```
[GameUIManager] üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Ñ—É–Ω–∫—Ü–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤...
[GameUIManager] üîç –û–∂–∏–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤... –ø–æ–ø—ã—Ç–∫–∞ 1/50
[GameUIManager] üìä forceCheckResourceChange: ‚ùå
[GameUIManager] üìä showResourceChangeIndicator: ‚ùå
...
[GameUIManager] ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!
[GameUIManager] üìä forceCheckResourceChange: function
[GameUIManager] üìä showResourceChangeIndicator: function
```

### **–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ GameScene:**
```
[GameScene] üîç –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤...
[GameScene] üîç –û–∂–∏–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤... –ø–æ–ø—ã—Ç–∫–∞ 1/50
[GameScene] üìä forceCheckResourceChange: ‚úÖ
[GameScene] üìä showResourceChangeIndicator: ‚úÖ
[GameScene] ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –≥–æ—Ç–æ–≤—ã!
```

### **–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Ä–µ—Å—É—Ä—Å–æ–≤:**
```
[processHourlyResourceProduction] üéØ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è –≤–æ–¥—ã: +4 –µ–¥
[processHourlyResourceConsumption] üéØ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è –µ–¥—ã: -4 –µ–¥
[updateMoraleFromComfort] üéØ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è –º–æ—Ä–∞–ª–∏: +5%
```

## üöÄ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

‚úÖ **UI overlay –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
‚úÖ **–§—É–Ω–∫—Ü–∏–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** –≤ `window` –æ–±—ä–µ–∫—Ç  
‚úÖ **GameScene –Ω–∞—Ö–æ–¥–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏** –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã  
‚úÖ **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è** –ø—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Ä–µ—Å—É—Ä—Å–æ–≤  

## üìä **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É**
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ª–æ–≥–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π
3. **–î–æ–∂–¥–∞—Ç—å—Å—è —Å–º–µ–Ω—ã —á–∞—Å–∞** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
4. **–£–±–µ–¥–∏—Ç—å—Å—è**, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ `forceCheckResourceChange` –¥–æ—Å—Ç—É–ø–Ω—ã
